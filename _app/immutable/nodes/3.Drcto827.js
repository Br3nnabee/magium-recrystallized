import{c as X,a as x,t as T}from"../chunks/FR7Sm50r.js";import{i as K}from"../chunks/CeEuuce0.js";import{h as et,ae as at,E as kt,aI as At,aJ as Ct,q as Et,v as Rt,aK as Lt,aL as $t,w as Mt,n as N,av as nt,aw as rt,ax as Tt,ah as Wt,a5 as dt,W as G,X as F,Z as J,o as O,m as I,a0 as k,_,$ as w,Y as U,A as st,l as h,a8 as Ot,aM as St,aN as Ft,T as Ut,aG as zt}from"../chunks/-mO8FoUd.js";import{b as Nt,w as Bt,s as P,e as S}from"../chunks/BZIAzr4R.js";import{p as D,b as it}from"../chunks/5pRROONK.js";import{i as Pt}from"../chunks/BSJcrc4-.js";import{t as Dt,e as H,i as vt,s as jt}from"../chunks/DiHcjTnL.js";import{s as bt,a as gt}from"../chunks/OWBUY1w_.js";import{o as V}from"../chunks/CPv2InpU.js";import{s as qt}from"../chunks/Dw_6KZ-X.js";function Q(t,e,a,n,s,i){var o=t.__className;if(et||o!==a||o===void 0){var u=Dt(a,n,i);(!et||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):t.className=u),t.__className=a}else if(i&&s!==i)for(var v in i){var c=!!i[v];(s==null||c!==!!s[v])&&t.classList.toggle(v,c)}return i}const It=()=>performance.now(),A={tick:t=>requestAnimationFrame(t),now:()=>It(),tasks:new Set};function pt(){const t=A.now();A.tasks.forEach(e=>{e.c(t)||(A.tasks.delete(e),e.f())}),A.tasks.size!==0&&A.tick(pt)}function Ht(t){let e;return A.tasks.size===0&&A.tick(pt),{promise:new Promise(a=>{A.tasks.add(e={c:t,f:a})}),abort(){A.tasks.delete(e)}}}function q(t,e){Bt(()=>{t.dispatchEvent(new CustomEvent(e))})}function Kt(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function ot(t){const e={},a=t.split(";");for(const n of a){const[s,i]=n.split(":");if(!s||i===void 0)break;const o=Kt(s.trim());e[o]=i.trim()}return e}const Gt=t=>t;function ct(t,e,a,n){var s=(t&Lt)!==0,i="both",o,u=e.inert,v=e.style.overflow,c,l;function p(){var b=Tt,m=at;nt(null),rt(null);try{return o??(o=a()(e,(n==null?void 0:n())??{},{direction:i}))}finally{nt(b),rt(m)}}var g={is_global:s,in(){e.inert=u,q(e,"introstart"),c=Y(e,p(),l,1,()=>{q(e,"introend"),c==null||c.abort(),c=o=void 0,e.style.overflow=v})},out(b){e.inert=!0,q(e,"outrostart"),l=Y(e,p(),c,0,()=>{q(e,"outroend"),b==null||b()})},stop:()=>{c==null||c.abort(),l==null||l.abort()}},r=at;if((r.transitions??(r.transitions=[])).push(g),Nt){var d=s;if(!d){for(var f=r.parent;f&&(f.f&kt)!==0;)for(;(f=f.parent)&&(f.f&At)===0;);d=!f||(f.f&Ct)!==0}d&&Et(()=>{Rt(()=>g.in())})}}function Y(t,e,a,n,s){var i=n===1;if($t(e)){var o,u=!1;return Mt(()=>{if(!u){var b=e({direction:i?"in":"out"});o=Y(t,b,a,n,s)}}),{abort:()=>{u=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return s(),{abort:N,deactivate:N,reset:N,t:()=>n};const{delay:v=0,css:c,tick:l,easing:p=Gt}=e;var g=[];if(i&&a===void 0&&(l&&l(0,1),c)){var r=ot(c(0,1));g.push(r,r)}var d=()=>1-n,f=t.animate(g,{duration:v});return f.onfinish=()=>{var b=(a==null?void 0:a.t())??1-n;a==null||a.abort();var m=n-b,y=e.duration*Math.abs(m),C=[];if(y>0){var E=!1;if(c)for(var z=Math.ceil(y/16.666666666666668),W=0;W<=z;W+=1){var R=b+m*p(W/z),M=ot(c(R,1-R));C.push(M),E||(E=M.overflow==="hidden")}E&&(t.style.overflow="hidden"),d=()=>{var L=f.currentTime;return b+m*p(L/y)},l&&Ht(()=>{if(f.playState!=="running")return!1;var L=d();return l(L,1-L),!0})}f=t.animate(C,{duration:y,fill:"forwards"}),f.onfinish=()=>{d=()=>n,l==null||l(n,1-n),s()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=N)},deactivate:()=>{s=N},reset:()=>{n===0&&(l==null||l(1,0))},t:()=>d()}}function Jt(t){return function(...e){var a=e[0];return a.stopPropagation(),t==null?void 0:t.apply(this,e)}}function Qt(t,e){var i;var a=(i=t.$$events)==null?void 0:i[e.type],n=Wt(a)?a.slice():a==null?[]:[a];for(var s of n)s.call(this,e)}const Xt=t=>t;function Yt(t){const e=t-1;return e*e*e+1}function lt(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Zt(t,{delay:e=0,duration:a=400,easing:n=Xt}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:a,easing:n,css:i=>`opacity: ${i*s}`}}function Vt(t,{delay:e=0,duration:a=400,easing:n=Yt,x:s=0,y:i=0,opacity:o=0}={}){const u=getComputedStyle(t),v=+u.opacity,c=u.transform==="none"?"":u.transform,l=v*(1-o),[p,g]=lt(s),[r,d]=lt(i);return{delay:e,duration:a,easing:n,css:(f,b)=>`
			transform: ${c} translate(${(1-f)*p}${g}, ${(1-f)*r}${d});
			opacity: ${v-l*b}`}}const Z=dt(!1);var te=T("<li><button> </button></li>"),ee=T('<div class="fixed inset-0 bg-[rgba(10,10,10,0.6)] backdrop-blur-sm z-40" aria-hidden="true"></div> <aside role="dialog" aria-modal="true"><button class="absolute top-6 right-6 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800 focus:outline-none focus:ring" aria-label="Close menu"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neutral-600 dark:text-neutral-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <nav class="mt-16 space-y-6"><h2>Menu</h2> <ul class="space-y-3"></ul></nav></aside>',1);function mt(t,e){G(e,!1);const[a,n]=bt(),s=()=>gt(Z,"$menuOpen",a),i=28*16*3;let o=I(!1);const u=()=>Z.update(r=>!r);function v(r){r.key==="Escape"&&(r.preventDefault(),r.stopImmediatePropagation(),u())}function c(){O(o,window.innerWidth>i)}V(()=>(c(),window.addEventListener("resize",c,{passive:!0}),window.addEventListener("keyup",v),()=>{window.removeEventListener("resize",c),window.removeEventListener("keyup",v)})),K();var l=X(),p=F(l);{var g=r=>{var d=ee(),f=F(d),b=k(f,2);let m;var y=_(b),C=k(y,2),E=_(C);let z;var W=k(E,2);H(W,4,()=>["Quicksave","Last Checkpoint","Achievements","Saves","Settings","About"],vt,(R,M)=>{var L=te(),j=_(L);let tt;var _t=_(j,!0);w(j),w(L),U(xt=>{tt=Q(j,1,`w-full min-w-[12rem] px-6 py-4 text-lg font-medium bg-gray-800
                     text-neutral-100 dark:bg-gray-100 dark:text-neutral-800
                     rounded-lg shadow hover:shadow-md transition`,null,tt,xt),P(_t,M)},[()=>({"text-left":h(o),"text-center":!h(o)})],st),S("click",j,()=>console.log(M)),x(R,L)}),w(W),w(C),w(b),U((R,M)=>{m=Q(b,1,`
      fixed inset-y-0 left-0 z-50
      p-8 overflow-auto w-full
      bg-gray-100 dark:bg-gray-900
    `,null,m,R),z=Q(E,1,"text-4xl font-extrabold text-neutral-800 dark:text-neutral-100",null,z,M)},[()=>({"max-w-md":h(o),"max-w-full":!h(o)}),()=>({"text-left":h(o),"text-center":!h(o)})],st),S("click",f,u),ct(3,f,()=>Zt),S("click",y,u),S("click",b,Jt(function(R){Qt.call(this,e,R)})),ct(3,b,()=>Vt,()=>({x:-innerWidth,duration:300})),x(r,d)};Pt(p,r=>{s()&&r(g)})}x(t,l),J(),n()}var ae=T('<header class="flex items-center bg-gray-800 text-neutral-100 px-4 sm:px-6 md:px-8 lg:px-12 py-2"><button class="font-semibold hover:text-neutral-300 text-xl py-2">MENU</button> <div class="flex-1 text-center leading-none"><h2 class="text-xs -mt-0.5 font-semibold truncate leading-none"> </h2> <h1 class="-mt-0.5 text-xl font-bold truncate leading-[1.05]"> </h1></div> <button class="font-semibold hover:text-neutral-300 text-xl py-2">STATS</button></header> <!>',1);function ne(t,e){G(e,!1);let a=D(e,"book",8),n=D(e,"chapter",8);K();var s=ae(),i=F(s),o=_(i),u=k(o,2),v=_(u),c=_(v);w(v);var l=k(v,2),p=_(l);w(l),w(u),Ot(2),w(i);var g=k(i,2);mt(g,{}),U(()=>{P(c,`BOOK ${a()??""}`),P(p,`CHAPTER ${n()??""}`)}),S("click",o,()=>Z.update(r=>!r)),x(t,s),J()}let $;const wt=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&wt.decode();let B=null;function re(){return(B===null||B.byteLength===0)&&(B=new Uint8Array($.memory.buffer)),B}function ft(t,e){return t=t>>>0,wt.decode(re().subarray(t,t+e))}function se(){return $.get_content()}async function ie(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(n){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const a=await t.arrayBuffer();return await WebAssembly.instantiate(a,e)}else{const a=await WebAssembly.instantiate(t,e);return a instanceof WebAssembly.Instance?{instance:a,module:t}:a}}function oe(){const t={};return t.wbg={},t.wbg.__wbg_new_78feb108b6472713=function(){return new Array},t.wbg.__wbg_push_737cfc8c1432c2c6=function(e,a){return e.push(a)},t.wbg.__wbindgen_init_externref_table=function(){const e=$.__wbindgen_export_0,a=e.grow(4);e.set(0,void 0),e.set(a+0,void 0),e.set(a+1,null),e.set(a+2,!0),e.set(a+3,!1)},t.wbg.__wbindgen_string_new=function(e,a){return ft(e,a)},t.wbg.__wbindgen_throw=function(e,a){throw new Error(ft(e,a))},t}function ce(t,e){return $=t.exports,ht.__wbindgen_wasm_module=e,B=null,$.__wbindgen_start(),$}async function ht(t){if($!==void 0)return $;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL(""+new URL("../assets/wasm_module_bg.CJwR9FRC.wasm",import.meta.url).href,import.meta.url));const e=oe();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:a,module:n}=await ie(await t,e);return ce(a,n)}const le=new URL(""+new URL("../assets/wasm_module_bg.CJwR9FRC.wasm",import.meta.url).href,import.meta.url),fe=ht(le);async function ue(){await fe;const t=se();return Array.from(t)}const yt=dt([]);async function de(){const t=await ue();yt.set(t)}var ve=T('<p class="text-lg mb-8"> </p>');function be(t,e){G(e,!1);const[a,n]=bt(),s=()=>gt(yt,"$content",a);V(()=>{de()}),K();var i=X(),o=F(i);qt(o,e,"default",{},u=>{var v=X(),c=F(v);H(c,1,s,vt,(l,p)=>{var g=ve(),r=_(g,!0);w(g),U(()=>P(r,h(p))),x(l,g)}),x(u,v)}),x(t,i),J(),n()}var ge=T(`<button class="px-8 py-4 bg-gray-800 text-lg text-neutral-100 dark:bg-gray-100 dark:text-neutral-800
  rounded-sm font-medium hover:bg-gray-700 dark:hover:bg-gray-200"> </button>`);function ut(t,e){let a=D(e,"label",8),n=D(e,"action",8);var s=ge(),i=_(s,!0);w(s),U(()=>P(i,a())),S("click",s,function(...o){var u;(u=n())==null||u.apply(this,o)}),x(t,s)}var pe=T('<div style="position:absolute; top:-9999px; left:-9999px; visibility:hidden;"></div> <div class="grid gap-4"></div>',1);function me(t,e){G(e,!1);let a=D(e,"choices",24,()=>[]),n=I(),s=I(),i=I(1),o=0;const u=16;async function v(){if(await zt(),!!h(s)){o=0;for(const r of Array.from(h(s).children)){const d=r.getBoundingClientRect().width;d>o&&(o=d)}c(h(n).clientWidth)}}function c(r){const d=a().length,f=Math.max(1,Math.floor((r+u)/(o+u)));if(d<=f){O(i,d);return}const b=[];for(let m=1;m*m<=d;m++)if(d%m===0){const y=d/m;m<=f&&b.push({rows:y,cols:m}),y<=f&&b.push({rows:m,cols:y})}b.length>0?(b.sort((m,y)=>{const C=Math.abs(m.rows-m.cols),E=Math.abs(y.rows-y.cols);return C!==E?C-E:y.cols-m.cols}),O(i,b[0].cols)):O(i,1)}V(()=>{v();const r=new ResizeObserver(d=>{for(const{contentRect:f}of d)c(f.width)});return r.observe(h(n)),()=>r.disconnect()}),St(()=>Ut(a()),()=>{a()&&v()}),Ft(),K();var l=pe(),p=F(l);H(p,5,a,r=>r.label,(r,d)=>{ut(r,{get label(){return h(d).label},action:()=>{}})}),w(p),it(p,r=>O(s,r),()=>h(s));var g=k(p,2);H(g,5,a,r=>r.label,(r,d)=>{ut(r,{get label(){return h(d).label},get action(){return h(d).action}})}),w(g),it(g,r=>O(n,r),()=>h(n)),U(()=>jt(g,`grid-template-columns: repeat(${h(i)??""}, minmax(0, 1fr));`)),x(t,l),J()}var we=T('<div class="min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900 text-neutral-900 dark:text-neutral-100"><header class="fixed w-full top-0 z-50 bg-gray-100 dark:bg-gray-900"><!> <!></header> <main class="flex-1 overflow-auto pt-10"><div class="w-full px-6 py-10 prose lg:prose-lg lg:px-16"><!> <div class="mt-8"><!></div></div></main></div>');function $e(t){const n=[{label:"Explore the forest",action:()=>console.log("Forest")},{label:"Enter the cave",action:()=>console.log("Cave")}];document.documentElement.setAttribute("data-theme","neutral");var s=we(),i=_(s),o=_(i);ne(o,{book:1,chapter:1});var u=k(o,2);mt(u,{}),w(i);var v=k(i,2),c=_(v),l=_(c);be(l,{});var p=k(l,2),g=_(p);me(g,{choices:n}),w(p),w(c),w(v),w(s),x(t,s)}export{$e as component};
